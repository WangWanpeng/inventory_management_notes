\pgfmathdeclarefunction{StandNormPdf}{1}{\pgfmathparse{1.0 / (sqrt(2 * pi)) * exp(-0.5 * (#1)^2)}}
\pgfmathdeclarefunction{StandNormCdf}{1}{\pgfmathparse{#1 > 0 ? (1.0 - 1.0 / sqrt(2 * (3.141592653589793238462643)) * exp(-(abs(#1)) * (abs(#1)) / 2) * ((0.31938153) * (1.0 / (1.0 + 0.2316419 * abs(#1))) + (-0.356563782) * (1.0 / (1.0 + 0.2316419 * abs(#1))) * (1.0 / (1.0 + 0.2316419 * abs(#1))) + (1.781477937) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),3) + (-1.821255978) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),4) + (1.330274429) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),5))) : (1 - (1.0 - 1.0 / sqrt(2 * (3.141592653589793238462643)) * exp(-(abs(#1)) * (abs(#1)) / 2) * ((0.31938153) * (1.0 / (1.0 + 0.2316419 * abs(#1))) + (-0.356563782) * (1.0 / (1.0 + 0.2316419 * abs(#1))) * (1.0 / (1.0 + 0.2316419 * abs(#1))) + (1.781477937) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),3) + (-1.821255978) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),4) + (1.330274429) * pow((1.0 / (1.0 + 0.2316419 * abs(#1))),5))))}}
\pgfmathdeclarefunction{StandNormLoss}{1}{\pgfmathparse{StandNormPdf(#1) - #1 * (1.0 - StandNormCdf(#1))}}
\pgfmathdeclarefunction{StandNormInv}{1}{\pgfmathparse{#1 < 0.02425 ? ((((((- 7.784894002430293e-03 * sqrt(-2 * ln(#1)) - 3.223964580411365e-01) * sqrt(-2 * ln(#1)) - 2.400758277161838e+00) * sqrt(-2 * ln(#1)) - 2.549732539343734e+00) * sqrt(-2 * ln(#1)) + 4.374664141464968e+00) * sqrt(-2*ln(#1)) + 2.938163982698783e+00) / ((((7.784695709041462e-03 * sqrt(-2 * ln(#1)) + 3.224671290700398e-01) * sqrt(-2 * ln(#1)) + 2.445134137142996e+00) * sqrt(-2 * ln(#1)) + 3.754408661907416e+00) * sqrt(-2 * ln(#1)) + 1)) : ((1 - 0.02425) < #1 ? (-(((((-7.784894002430293e-03 * sqrt(-2 * ln(1 - #1)) - 3.223964580411365e-01) * sqrt(-2 * ln(1 - #1)) - 2.400758277161838e+00) * sqrt(-2 * ln(1 - #1)) - 2.549732539343734e+00) * sqrt(-2 * ln(1 - #1)) + 4.374664141464968e+00) * sqrt(-2 * ln(1 - #1)) + 2.938163982698783e+00) / ((((7.784695709041462e-03 * sqrt(-2 * ln(1 - #1)) + 3.224671290700398e-01) * sqrt(-2 * ln(1 - #1)) + 2.445134137142996e+00) * sqrt(-2 * ln(1 - #1)) + 3.754408661907416e+00) * sqrt(-2 * ln(1 - #1)) + 1)) : ((((((-3.969683028665376e+01 * (#1 - 0.5)^2 + 2.209460984245205e+02) * (#1 - 0.5)^2 - 2.759285104469687e+02) * (#1 - 0.5)^2 + 1.383577518672690e+02) * (#1 - 0.5)^2 - 3.066479806614716e+01) * (#1 - 0.5)^2 + 2.506628277459239e+00) * (#1 - 0.5) / (((((-5.447609879822406e+01 * (#1 - 0.5)^2 + 1.615858368580409e+02) * (#1 - 0.5)^2 - 1.556989798598866e+02)*(#1 - 0.5)^2 + 6.680131188771972e+01)*(#1 - 0.5)^2 - 1.328068155288572e+01) * (#1 - 0.5)^2 + 1)))}}
\pgfmathdeclarefunction{Ldeter}{4}{\pgfmathparse{#3 * max(0,#1 - #2) + #4 * max(0,#2 - #1)}}
\pgfmathdeclarefunction{Lstoch}{5}{\pgfmathparse{#4 * (#1 - #2) + (#4 + #5) * #3 * StandNormLoss((#1 - #2) / #3)}}
\pgfmathdeclarefunction{Qopt}{4}{\pgfmathparse{#1 + #2 * StandNormInv(#4 / (#3 + #4))}}
\pgfmathdeclarefunction{Lopt}{4}{\pgfmathparse{(#3 + #4) * #2 * StandNormPdf(StandNormInv(#4 / (#3 + #4)))}}
\pgfmathdeclarefunction{Loss}{3}{\pgfmathparse{(#1 - #2) + #3 * StandNormLoss((#1 - #2) / #3)}}


\pgfmathdeclarefunction{L}{3}{\pgfmathparse{
0.1 * (#2 * max(#1-0,0) + #3 * max(0-#1,0)) + 
0.1 * (#2 * max(#1-1,0) + #3 * max(1-#1,0)) + 
0.1 * (#2 * max(#1-2,0) + #3 * max(2-#1,0)) + 
0.1 * (#2 * max(#1-3,0) + #3 * max(3-#1,0)) + 
0.1 * (#2 * max(#1-4,0) + #3 * max(4-#1,0)) + 
0.1 * (#2 * max(#1-5,0) + #3 * max(5-#1,0)) + 
0.1 * (#2 * max(#1-6,0) + #3 * max(6-#1,0)) + 
0.1 * (#2 * max(#1-7,0) + #3 * max(7-#1,0)) + 
0.1 * (#2 * max(#1-8,0) + #3 * max(8-#1,0)) + 
0.1 * (#2 * max(#1-9,0) + #3 * max(9-#1,0))}}

\pgfmathdeclarefunction{V}{4}{\pgfmathparse{ (#3-#2) * #1) - (
0.1 * (#3-#4) * max(#1-0,0) +
0.1 * (#3-#4) * max(#1-1,0) +
0.1 * (#3-#4) * max(#1-2,0) +
0.1 * (#3-#4) * max(#1-3,0) +
0.1 * (#3-#4) * max(#1-4,0) +
0.1 * (#3-#4) * max(#1-5,0) +
0.1 * (#3-#4) * max(#1-6,0) +
0.1 * (#3-#4) * max(#1-7,0) +
0.1 * (#3-#4) * max(#1-8,0) +
0.1 * (#3-#4) * max(#1-9,0))}}
